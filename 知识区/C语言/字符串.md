# 字符串

## 定义
C语言中字符串是以`'\0'`（空字符）结尾的字符[[数组]]，本质上是`char`类型数组。字符串常量存储在只读数据区，字符数组可修改。C标准库（string.h）提供了丰富的字符串处理函数如strcpy、strcmp、strlen、strcat等。字符串操作是C编程的基础，也是缓冲区溢出等安全问题的高发区。

## 核心内容
**定义方式**：
```c
// 1. 字符数组
char str1[10] = "hello";     // 可修改，栈上
char str2[] = "world";       // 自动计算大小6（含\0）

// 2. 字符指针（常量字符串）
char *str3 = "hello";        // 指向常量区，不可修改
const char *str4 = "hello";  // 推荐写法

// 3. 动态分配
char *str5 = (char*)malloc(100);
strcpy(str5, "hello");
```

**常用函数**（string.h）：
```c
// 1. 长度（不含\0）
size_t strlen(const char *s);
int len = strlen("hello");  // 5

// 2. 复制
char *strcpy(char *dest, const char *src);
char *strncpy(char *dest, const char *src, size_t n);  // 更安全
strcpy(dest, "hello");

// 3. 连接
char *strcat(char *dest, const char *src);
char *strncat(char *dest, const char *src, size_t n);

// 4. 比较（字典序）
int strcmp(const char *s1, const char *s2);
// 返回：0相等，<0 s1<s2，>0 s1>s2
int strncmp(const char *s1, const char *s2, size_t n);

// 5. 查找
char *strchr(const char *s, int c);     // 查找字符
char *strstr(const char *s1, const char *s2);  // 查找子串

// 6. 分割
char *strtok(char *s, const char *delim);
```

**安全函数**（C11）：
```c
strcpy_s(dest, destSize, src);  // 带边界检查
strcat_s(dest, destSize, src);
```

**输入输出**：
```c
// 输入
char str[100];
scanf("%s", str);      // 遇空格停止
gets(str);             // 不安全！已废弃
fgets(str, 100, stdin);  // 推荐，安全

// 输出
printf("%s\n", str);
puts(str);  // 自动换行
```

**字符串与数字转换**（stdlib.h）：
```c
int atoi(const char *str);     // 字符串→整数
long atol(const char *str);
double atof(const char *str);  // 字符串→浮点
char *itoa(int value, char *str, int base);  // 整数→字符串（非标准）
sprintf(str, "%d", num);       // 推荐方式
```

**常见错误**：
1. 忘记`\0`结束符
2. 缓冲区溢出（strcpy未检查长度）
3. 修改字符串常量
4. 未分配足够空间

## 应用场景
文本处理；命令行参数解析；[[文件操作]]；网络协议；配置文件读取；用户输入处理。

## 注意事项
- 字符串必须以\0结尾
- 使用strncpy、strncat等安全版本
- 字符指针指向的常量不可修改
- 注意缓冲区大小防止溢出

## 关联知识
与 [[数组]]、[[指针]]、[[文件操作]]、[[内存安全]]、[[缓冲区溢出]] 相关。
