# 函数传参

## 定义
函数传参是指向函数传递实际参数的过程。C语言采用值传递机制，即传递参数的副本。若要修改实参，需传递指针。

## 核心内容
**1. 值传递（传值）**
```c
void swap_wrong(int a, int b) {
    int temp = a;
    a = b;
    b = temp; // 只交换副本，不影响实参
}
```

**2. 指针传递（传址）**
```c
void swap_correct(int *a, int *b) {
    int temp = *a;
    *a = *b;
    *b = temp; // 通过指针修改实参
}

int x = 10, y = 20;
swap_correct(&x, &y); // 传递地址
```

**3. 数组作为参数（退化为指针）**
```c
// 以下三种声明等价
void func(int arr[]);
void func(int arr[10]); // 10被忽略
void func(int *arr);

// 需要同时传递长度
void process(int arr[], int len) {
    for (int i = 0; i < len; i++) {
        arr[i] *= 2;
    }
}
```

**4. 二维数组传递**
```c
// 必须指定列数
void print_matrix(int arr[][3], int rows) {
    for (int i = 0; i < rows; i++) {
        for (int j = 0; j < 3; j++) {
            printf("%d ", arr[i][j]);
        }
    }
}
```

**5. 结构体传递**
```c
// 值传递（拷贝整个结构体）
void func1(struct Student stu);

// 指针传递（高效）
void func2(struct Student *stu);

// const保护
void display(const struct Student *stu); // 不修改结构体
```

**6. 可变参数**
```c
#include <stdarg.h>
int sum(int count, ...) {
    va_list args;
    va_start(args, count);
    int total = 0;
    for (int i = 0; i < count; i++) {
        total += va_arg(args, int);
    }
    va_end(args);
    return total;
}
```

## 应用场景
- 修改多个值：通过指针返回多个结果
- 大对象传递：传递指针避免拷贝开销
- 数组处理：传递数组首地址和长度
- 回调函数：通过函数指针传递

## 注意事项
- C语言只有值传递，"引用传递"实际是传指针
- 数组参数不会拷贝整个数组，只传首地址
- sizeof(arr)在函数内部得到的是指针大小，不是数组大小
- 传递结构体时优先使用指针（效率考虑）
- 注意空指针检查

## 关联知识
与 [[指针]]、[[函数指针]]、[[数组]]、[[结构体]] 相关。
